@page "/"
<PageTitle>Index</PageTitle>


@if (_studysets is not null)
{
    //https://getbootstrap.com/docs/5.0/content/tables/

    <div class="container">
        <div class="container mb-3">
            <div class="row">
                <div class="col">
                    <label for="inputSearch" class="form-label"></label>
                    <input @bind=@SearchText @bind:event="oninput" @bind:after=@SearchForStudysets id="inputSearch" class="form-control" />
                </div>
                @if (_categories is not null)
                {
                    <div class="col form-group">
                        <label for="inputCat" class="form-label"></label>
                        <input @bind=@SelectedCategoryName @bind:event="oninput" @bind:after=@SearchForStudysets list="items" id="inputCat" class="form-control" />
                        <datalist id="items">
                            @foreach (var item in _categories)
                            {
                                <option value="@item.Name"></option>
                            }
                        </datalist>
                    </div>
                }
                <div class="col">
                    <label for="inputDate" class="form-label"></label>
                    <input @bind-value=@MinDate id="inputDate" class="form-control" type="date" />
                </div>
            </div>
        </div>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col">Name</th>
                    <th scope="col">Kategorie</th>
                    <th scope="col">Ersteller</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <Virtualize Items="@_studysets" Context="Studyset" ItemSize="10" OverscanCount="5">
                    <tr style="cursor: pointer" onclick="window.location='studyset/@Studyset.Id'">
                        <th scope="row"></th>
                        <td>@Studyset.Name</td>
                        <td>@Studyset.Category.Name</td>
                        <td>@Studyset.Creator.Email</td>
                        <td></td>
                    </tr>
                </Virtualize>
            </tbody>
        </table>


        <button class="btn" @onclick="InitSampleData">Init Sample Data</button>

    </div>
}
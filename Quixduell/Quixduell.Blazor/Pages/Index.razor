@page "/"
<PageTitle>Index</PageTitle>


@if (_studysets is not null)
{
    //https://getbootstrap.com/docs/5.0/content/tables/

    <div class="container">
        <div class="container mb-3">
            <div class="row">
                <div class="col">
                    <label for="inputSearch" class="form-label"></label>
                    <input @bind=@SearchText @bind:event="oninput" @bind:after=@SearchForStudysets id="inputSearch" class="form-control" />
                </div>
                @if (_categories is not null)
                {
                    <div class="col form-group">
                        <label for="inputCat" class="form-label"></label>
                        <input @bind=@SelectedCategoryName @bind:event="oninput" @bind:after=@SearchForStudysets list="items" id="inputCat" class="form-control" />
                        <datalist id="items">
                            @foreach (var item in _categories)
                            {
                                <option value="@item.Name"></option>
                            }
                        </datalist>
                    </div>
                }
                <div class="col">
                    <div class="form-check form-switch">
                        <input @bind=@ShowConnected  @bind:after=@SearchForStudysets class="form-check-input" type="checkbox" id="flexSwitchCheckChecked">
                        <label class="form-check-label" for="flexSwitchCheckChecked">Zeige eigene und gemerkte Studysets</label>
                    </div>
                </div>
            </div>
        </div>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col">Name</th>
                    <th scope="col">Kategorie</th>
                    <th scope="col">Ersteller</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <Virtualize Items="@_studysets" Context="Studyset" ItemSize="10" OverscanCount="5">
                    <tr style="cursor: pointer">
                        <th scope="row"></th>
                        <td>@Studyset.Name</td>
                        <td>@Studyset.Category.Name</td>
                        <td>@Studyset.Creator.Email</td>
                        @if (CheckIfCurrentUserStored(Studyset))
                        {
                            <th scope="col" style="color: red;" @onclick="async (s) =>{await UnNoticeStudyset(Studyset);}">&#10084;</th>
                        }
                        else
                        {
                            <th scope="col" style="color: grey;" @onclick="async (s) =>{await NoticeStudyset(Studyset);}">&#10084;</th>
                        }
                    </tr>
                </Virtualize>
            </tbody>
        </table>


        <button class="btn" @onclick="InitSampleData">Init Sample Data</button>

    </div>
}